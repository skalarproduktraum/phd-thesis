% Table of contents formatting
\renewcommand{\contentsname}{Contents}
\setcounter{secnumdepth}{2}
\setcounter{tocdepth}{1}
 
% Headers and page numbering 
\usepackage{fancyhdr}
\usepackage{fontspec}
\usepackage{epigraph}
\usepackage{titlesec}
\usepackage[toc,page]{appendix}
\usepackage{pdfpages}
\usepackage{qrcode}
\usepackage{xpatch}
\pagestyle{plain}
 
% Fonts and typesetting
\usepackage[usenames,svgnames]{xcolor}
\usepackage{colortbl}
\newfontfamily{\headingfont}[Path=fonts/, 
    Extension = .ttf, 
    UprightFont = *-Regular,
    BoldFont = *-Bold]{RobotoSlab}

\setmonofont[Path=fonts/, 
    Extension = .otf, 
    UprightFont = *-Regular,
    BoldFont = *-Bold, 
    ItalicFont = *-It, 
    BoldItalicFont = *-BoldIt]{SourceCodePro}

\setmainfont[Path=fonts/, 
    Extension = .ttf, 
    UprightFont = *-Regular, 
    BoldFont = *-Bold, 
    ItalicFont = *-Italic, 
    BoldItalicFont = *-BoldItalic]{EBGaramond}

% Set figure legends and captions to be smaller sized sans serif font
%\usepackage[font={footnotesize}]{caption}
\usepackage[caption=false]{subfig}

\usepackage{siunitx}

% Adjust spacing between lines to 1.5
\usepackage{setspace}
\onehalfspacing
\raggedbottom

% Chapter styling
\usepackage[grey]{quotchap}
\makeatletter 
\renewcommand*{\chapnumfont}{%
  \usefont{T1}{\@defaultcnfont}{b}{n}\fontsize{80}{100}\selectfont% Default: 100/130
  \color{chaptergrey}%
}
\makeatother

\newcommand{\yellowbox}[1]{\colorbox{yellow}{#1}}
\titleformat{\chapter}[display]
  {\LARGE\headingfont}
  {\chaptertitlename\ \thechapter}
  {0pt}
  {\Huge\yellowbox}
\titleformat*{\section}{\LARGE\headingfont}
\titleformat*{\subsection}{\Large\headingfont}
\makeatletter
\titleformat{\part}[display]
  {\Huge\headingfont\filright}
  {\partname~\thepart:}
  {0pt}
  {\thispagestyle{epigraph}\Huge\yellowbox}
\makeatother
\setlength\epigraphwidth{0.6\textwidth}

\makeatletter
\xpatchcmd\epigraphhead
 {\let\@evenfoot}
 {\let\@oddfoot\@empty\let\@evenfoot}
 {}{}
\makeatother

% Set colour of links to black so that they don't show up when printed
\usepackage{hyperref}
\hypersetup{colorlinks=true, linkcolor=black}

% letter spacing â€” workaround needed by tufte-book package
% Set up the spacing using fontspec features
\renewcommand\allcapsspacing[1]{{\addfontfeature{LetterSpace=15}#1}}
\renewcommand\smallcapsspacing[1]{{\addfontfeature{LetterSpace=10}#1}}

% Tables
\usepackage{booktabs}
\usepackage{threeparttable}
\usepackage{array}
\usepackage{unicode-math}
\usepackage{algorithm2e}
\usepackage{mathtools}
\usepackage{menukeys}
\DeclarePairedDelimiter{\ceil}{\lceil}{\rceil}
\DeclarePairedDelimiter\floor{\lfloor}{\rfloor}

\newcolumntype{x}[1]{%
>{\centering\arraybackslash}m{#1}}%

% TODO command
\newcommand{\TODO}[1]{\colorbox{OrangeRed}{\textcolor{White}{\textbf{\emph{TODO:} #1}}}}

% Epigraph
\newcommand{\myepigraph}[2]{\epigraphhead[450]{#1\par\hspace*{\fill}\textsc{---#2}}}

\hypersetup{
    linkcolor={MidnightBlue},
    citecolor={MidnightBlue},
    urlcolor={MidnightBlue}
}

% \renewcommand{\citep}[1]{\cite{#1}}
% \let\citep\cite

% smaller fonts for algorithms
\SetAlFnt{\small}

% look in the figures path by default
\graphicspath{{../figures/}{figures/}{./}{../figures/external/}{figures/external/}}

